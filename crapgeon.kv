#: import DungeonStats game_stats.DungeonStats

<BoxLayout>:
    #spacing: '5dp'
    #padding: '5dp'

<Label>:
    text_size: self.size    # needed to make halign work  
    halign: 'left'
    valign: 'center'
    font_size: '20sp'
    #padding: '20dp', '10dp', '20dp', '10dp'

<Button>:
    halign: 'center'
    disabled: True


<Tile>:
    background_normal: ''   # sets the background default to white instead of predefined grey
    background_color: 0.4, 0.8, 1, 1
    size_hint: None,None
    width: '60dp'
    height: self.width
    disabled: True
    kind: None

    canvas:
        Color:
            rgba: (1,1,1,0.8) if not self.disabled else (1,1,1,1)

        Rectangle:  # draws the floor      
            pos: self.pos
            size: self.size
            source: self.kind + 'background.png' if self.kind else None


<ScrollView>:

    effect_cls: 'ScrollEffect'  # avoids bouncing when reaching end of scroll


<CrapgeonGame>:
    orientation: 'vertical'
    padding: '5dp'

    level: app.level

    on_active_character_id: name_label.text = str(root.active_character.name)
    on_shovels: shovels_label.text = 'Shovels: ' + str(root.active_character.stats.shovels) if root.active_character.name != 'Hawkins' else 'Dynamite: 0'
    on_weapons: weapons_label.text = 'Weapons: ' + str(root.active_character.stats.weapons)
    on_gems: gems_label.text = 'Gems: ' + str(root.active_character.gems) + '/' + str(root.total_gems)
    
    # HEADER LABELS: CHARACTER NAME AND FLOOR NUMBER
    BoxLayout:
        padding: '5dp'
        orientation: 'horizontal'
        size_hint: 1, 0.1
        
        Label:
            id: name_label
            size_hint: 0.6, 1
            font_size: '23sp'

        ToggleButton:
            size_hint: 0.4, 1
            text:'ACTION'
            
    # GUI: CHARACTER STATS AND INVENTORY
    BoxLayout:
        orientation: 'horizontal'
        size_hint: 1, 0.3
        padding: '5dp'

        #CHARACTER STATS
        BoxLayout:
            orientation: 'vertical'
            size_hint: 0.5,1
            spacing: '5dp'

            Label:
                id: level_label
                text: 'FLOOR 1'
            Label:
                id: weapons_label
            Label:  
                id: shovels_label
            Label:
                id: gems_label

        #INVENTORY
        BoxLayout:
            orientation: 'vertical'
            size_hint: 0.5,1
            spacing: '5dp'

            Button:
                text: 'Jerky'
            Button:
                text: 'Tobacco'
            Button:
                text: 'Whisky'
            Button:
                text: 'Bloodstone'

    ScrollView:
        size_hint: 1, 0.6
    
        DungeonLayout:
            stats: DungeonStats()
            level: self.stats.level
            size_hint: None, None
            height: self.minimum_height
            width: self.minimum_width
            rows: self.stats.size()
            cols: self.stats.size()