<DungeonLayout>:


<Label>:

    text_size: self.size    #needed to make halign work  
    halign: 'left'
    font_size: '20sp'


<Tile>:
    
    background_normal: ''   #sets the background default to white instead of predefined grey
    background_color: 0.4, 0.8, 1, 1
    size_hint: None,None
    width: '60dp'
    height: self.width
    disabled: True
    kind: None

    canvas:
        
        Color:

            rgba: (1,1,1,0.8) if not self.disabled else (1,1,1,1)

        Rectangle:  #draws the floor
            
            pos: self.pos
            size: self.size
            source: self.kind + 'background.png' if self.kind else None


<ScrollView>:

    effect_cls: 'ScrollEffect'  #this avoids bouncing when reaching end of scroll


<CrapgeonGame>:

    level: app.level

    orientation: "vertical"

    on_active_character_id: name_label.text = str(root.active_character.name)
    on_health: health_label.text = 'Health: ' + str(root.active_character.health) + '/' + str(root.active_character.max_health)
    on_shovels: shovels_label.text = 'Shovels: ' + str(root.active_character.shovels)
    on_weapons: weapons_label.text = 'Weapons: ' + str(root.active_character.weapons)
    on_gems: gems_label.text = 'Gems: ' + str(root.active_character.gems) + '/' + str(root.total_gems)

    GridLayout:     # to separate character picture and info

        size_hint: 1, 0.25
        rows: 1
        cols: 2

        Label:      #CHARACTER PICTURE HERE

            size_hint: 0.05, 1

            #text: "PICTURE \n HERE"

            #halign: 'center'

        BoxLayout:
            orientation:'vertical'

            Label:

                #halign: 'center'

                font_size: '25sp'
                id: name_label

            Label:
                id: health_label

            Label:  
                id: shovels_label
            
            Label:
                id: weapons_label

            Label:
                id: gems_label

    ScrollView:
        size_hint: 1, 0.6
    
        DungeonLayout:

            level: root.level
            size_hint: None, None
            height: self.minimum_height
            width: self.minimum_width
            rows: self.dungeon_size()
            cols: self.dungeon_size()